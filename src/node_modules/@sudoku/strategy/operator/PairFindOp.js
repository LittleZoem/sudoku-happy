import { StrategyOperator } from '../strategy_base';

// 找到一行中的能关联起来的对子
class PairFindOperator extends StrategyOperator
{
    constructor() {
        super("PairFindOperator");
        this.cellMap = null;
        this.pairs = null;
    }

    begin () {
        super.begin();
        this.cellMap = new Map();
        this.pairs = [];
    }

    excute (y, x, candidates) {

        super.excute();

        if (candidates[y][x].length == 2) {

            let key = candidates[y][x][0] + ' ' + candidates[y][x][1];
            
            if (this.cellMap.has(key)) {
                let pre = this.cellMap.get(key);
                this.pairs.push([pre[0], pre[1], y, x, candidates[y][x][0], candidates[y][x][1]]);
            }
            else {
                this.cellMap.set(key, [y,x]);
            }
        }
    }

    end() {
        super.end();
        return this.pairs;
    }
}

export {
    PairFindOperator
};