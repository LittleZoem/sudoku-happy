import { StrategyOperator } from '../strategy_base';

class StrongLinkOperator extends StrategyOperator {
    constructor() {
        super("StrongLinkOperator");
        this.numberCount = [ [], [], [], [], [], [], [], [], [] ];
    }

    begin () {
        super.begin();
        this.numberCount = [ [], [], [], [], [], [], [], [], [] ];
    }

    excute (y, x, candidates) {
        super.excute();

        let len = candidates[y][x].length;

        for (let i = 0; i < len; i++) {
            //记录下数字坐标
            this.numberCount[ candidates[y][x][i] - 1 ].push( [y,x] );
        }
    }

    end() {
        super.end();
        let links = [];  // 每个元素： [number y1 x1 y2 x2]

        for (let i = 0 ; i < 9; i++) {
            let len = this.numberCount[i].length;
            if (len == 2) {
                links.push([ i+1, this.numberCount[i][0][0], this.numberCount[i][0][1], this.numberCount[i][1][0], this.numberCount[i][1][1] ]);
            }
        }

        return links;
    }
}

export {
    StrongLinkOperator
};