/**
 * @param {string} urlcode
 * @returns {number[][]}
 */
export function decodeUrlcode(urlcode) {
	// 检查URL有效性
    const urlObj = new URL(urlcode);

    // 提取 'bd' 参数（数独棋盘数据）
    const gridParam = urlObj.searchParams.get('bd');

    // 将棋盘数据解析为二维数组
    const grid = [];

	for (let i = 0; i < 9; i++) {
		grid.push(gridParam.slice(i * 9, i * 9 + 9).split('').map(Number));
    }

	return grid;
}


/**
 * @param {string} urlcode
 * @returns {boolean}
 */
export function validateUrlcode(urlcode) {
    if (!urlcode || urlcode.trim().length === 0) return false;

    try {
        // 检查URL有效性
        const urlObj = new URL(urlcode);
        if (!urlObj.hostname.includes('sudokuwiki.org')) {
            throw new Error('Invalid Sudoku Wiki URL');
        }
        // 提取 'bd' 参数（数独棋盘数据）
        const gridParam = urlObj.searchParams.get('bd');
        // 25...........18.5.6....4..9...3.94.5..5...7..7.84.2...4..9....7.6.12...........92
        
        if (!gridParam || gridParam.length !== 81) {
            throw new Error('Invalid Sudoku puzzle data');
        }
    } catch (error) {
        return false;
    }

    return true;
}